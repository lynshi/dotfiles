- hosts: mycomputer
  tasks:
    - name: Set Git name
      community.general.git_config:
        name: user.name
        scope: global
        value: "{{ git_name }}"
    - name: Set Git email
      community.general.git_config:
        name: user.email
        scope: global
        value: "{{ git_email }}"
    - name: Set Git editor
      community.general.git_config:
        name: core.editor
        scope: global
        value: vim
    - name: Setup for Azure DevOps
      community.general.git_config:
        name: credential.https://dev.azure.com.useHttpPath
        scope: global
        value: true
    - name: Auto setup remote on push
      community.general.git_config:
        name: push.autoSetupRemote
        scope: global
        value: true
    - name: Tap microsoft/git (Darwin)
      when: ansible_facts['os_family'] == "Darwin"
      community.general.homebrew_tap:
        name: microsoft/git
    - name: Install Git Credential Manager (Darwin)
      when: ansible_facts['os_family'] == "Darwin"
      community.general.homebrew_cask:
        name: git-credential-manager-core
